#include <Arduino.h>
#include <U8g2lib.h>

#include <Wire.h>

U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);

static const unsigned char image_battery_charging_bits[] U8X8_PROGMEM = {0x00,0x40,0x00,0xf0,0x27,0x7f,0x08,0x30,0x80,0x08,0x10,0x80,0x0e,0x18,0x80,0x01,0x0c,0x80,0x01,0xfc,0x81,0x01,0xfe,0x80,0x01,0xc0,0x80,0x01,0x60,0x80,0x0e,0x20,0x80,0x08,0x30,0x80,0x08,0x10,0x80,0xf0,0xcb,0x7f,0x00,0x08,0x00,0x00,0x00,0x00};
static const unsigned char image_battery_empty_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0xf0,0xff,0x7f,0x08,0x00,0x80,0x08,0x00,0x80,0x0e,0x00,0x80,0x01,0x00,0x80,0x01,0x00,0x80,0x01,0x00,0x80,0x01,0x00,0x80,0x01,0x00,0x80,0x0e,0x00,0x80,0x08,0x00,0x80,0x08,0x00,0x80,0xf0,0xff,0x7f,0x00,0x00,0x00,0x00,0x00,0x00};
static const unsigned char image_hour_glass_75_bits[] U8X8_PROGMEM = {0xff,0x07,0x02,0x02,0x02,0x02,0x8a,0x02,0xfa,0x02,0x74,0x01,0xa8,0x00,0x50,0x00,0x50,0x00,0x88,0x00,0x24,0x01,0x22,0x02,0x72,0x02,0xfa,0x02,0xfe,0x03,0xff,0x07};
static const unsigned char image_lamp_on_bits[] U8X8_PROGMEM = {0x40,0x00,0xe0,0x00,0xa0,0x00,0x10,0x01,0x10,0x01,0x10,0x01,0x0c,0x06,0x02,0x08,0x01,0x10,0xfe,0x0f,0x10,0x01,0xe3,0x18,0x00,0x00,0x08,0x02,0x44,0x04,0x40,0x00};
static const unsigned char image_Layer_19_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x20,0x04,0x00,0x42,0x00,0x20,0x0e,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x20,0x06,0x00,0xa2,0x00,0x20,0x08,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x20,0x04,0x00,0x82,0x00,0x20,0x04,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x20,0x04,0x00,0x42,0x00,0x20,0x08,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0xe0,0x0e,0x00,0xee,0x00,0xe0,0x06,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x28,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x44,0x00,0x00,0x44,0x00,0x10,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x44,0x00,0x00,0x44,0x00,0x10,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x00,0x00,0x82,0x00,0x08,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x03,0x80,0x01,0x03,0x06,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,0x7f,0x00,0xfc,0x7f,0x00,0xfc,0x01,0xf0,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0xff,0xff,0x1f,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xf8,0xff,0xff,0x03,0x30,0x00,0x00,0x60,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x06,0x00,0x00,0x0c,0x08,0x00,0x00,0x80,0x20,0x9c,0x04,0x8c,0x33,0x2e,0x19,0x04,0x01,0x00,0x00,0x10,0x74,0x23,0x52,0x37,0x11,0xa4,0x04,0x12,0x49,0x24,0x25,0x88,0x46,0xee,0x6e,0x2a,0x24,0x55,0x55,0x51,0x11,0xa4,0x04,0x0c,0x49,0x24,0x19,0x88,0xaa,0x44,0xa2,0x2a,0x22,0x73,0x31,0x33,0x0a,0x9c,0x04,0x10,0x79,0x24,0x21,0x50,0xe6,0x44,0x66,0x44,0x22,0x55,0x55,0x51,0x0a,0x84,0x02,0x12,0x49,0x24,0x25,0x50,0xaa,0x44,0xa2,0x44,0x22,0x55,0x52,0x57,0x0a,0x04,0x01,0x0c,0x49,0xc4,0x18,0x50,0xa6,0x44,0xae,0x44,0x02,0x00,0x00,0x00,0x0a,0x00,0x00,0x00,0x00,0x00,0x00,0x50,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x0a,0x00,0x00,0x00,0x00,0x00,0x00,0x50,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0xca,0xe4,0x0c,0x3f,0x00,0x00,0x00,0x50,0x40,0x49,0x1c,0x40,0x02,0x00,0x00,0x00,0xca,0xb4,0x0d,0x0d,0x00,0x00,0x00,0x50,0x40,0x55,0x88,0x40,0x02,0x00,0x00,0x00,0xca,0xb4,0x0d,0x0c,0x00,0x00,0x00,0x50,0x40,0x55,0x08,0x40,0x8e,0x10,0x00,0x00,0xca,0xb6,0x0d,0x0c,0x03,0x00,0x20,0x51,0xc0,0x55,0x08,0x40,0x56,0x15,0x08,0x00,0x8a,0xb6,0x0d,0x0c,0x03,0x00,0x20,0x51,0x80,0xc8,0x89,0x40,0xce,0x1d,0x00,0x00,0x8a,0xb3,0x0d,0x0c,0x00,0x00,0x20,0x51,0x00,0x00,0x00,0x40,0x46,0x15,0x00,0x00,0x0a,0xb3,0x4d,0x0c,0x03,0x00,0x20,0x51,0x00,0x00,0x00,0x40,0x46,0x05,0x08,0x00,0x0a,0xe1,0x7c,0x0c,0x03,0x00,0xa0,0x50,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x0a,0x00,0x00,0x00,0x00,0x00,0x40,0x50,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x0a,0x11,0x3d,0x1e,0x00,0x00,0x00,0x50,0x00,0x00,0x40,0x42,0x02,0x00,0x00,0x00,0x8a,0xb1,0x6d,0x13,0x00,0x00,0x00,0x50,0x00,0x00,0x40,0x42,0xde,0xc5,0x01,0x00,0x8a,0xf3,0x6d,0x03,0x00,0x00,0x00,0x50,0x00,0x00,0x40,0x42,0x8a,0x84,0x08,0x00,0x8a,0xf2,0x6d,0x0f,0x03,0x00,0xc0,0x50,0x00,0x00,0x40,0x42,0x8a,0x84,0x00,0x00,0xca,0x57,0x3d,0x1e,0x03,0x00,0x20,0x51,0x00,0x00,0x40,0x41,0x8a,0x84,0x00,0x00,0xca,0x56,0x0d,0x18,0x00,0x00,0x20,0x51,0x00,0x00,0x80,0x40,0xca,0x9d,0x08,0x00,0x4a,0x16,0x0d,0x19,0x03,0x00,0xe0,0x51,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x4a,0x16,0x0d,0x0f,0x03,0x00,0x20,0x51,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x0a,0x00,0x00,0x00,0x00,0x00,0x20,0x51,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x0a,0x00,0x00,0x00,0x00,0x00,0x00,0x50,0x3b,0x39,0x00,0x40,0xda,0xc9,0x01,0x00,0x4a,0x44,0xfc,0x3f,0x00,0x00,0x20,0xd2,0x90,0x12,0x01,0x40,0x86,0x94,0x08,0x00,0x4a,0x64,0x34,0x0d,0x00,0x00,0x20,0x52,0x91,0x13,0x00,0x40,0x8a,0x9c,0x00,0x00,0x4a,0xe5,0x30,0x0c,0x00,0x00,0x20,0x52,0x92,0x12,0x00,0x40,0x92,0x94,0x00,0x00,0x4a,0xa5,0x30,0x0c,0x03,0x00,0xa0,0xd2,0x91,0x12,0x01,0x40,0x8e,0x94,0x08,0x00,0xca,0xf7,0x31,0x0c,0x03,0x00,0xa0,0x52,0x00,0x00,0x00,0x40,0x04,0x00,0x00,0x00,0xd1,0xb7,0x31,0x0c,0x00,0x00,0xe0,0x8b,0x00,0x00,0x00,0x20,0x04,0x00,0x00,0x00,0x91,0x92,0x31,0x0c,0x03,0x00,0x40,0x89,0x00,0x00,0x00,0x20,0x08,0x00,0x00,0x80,0xa0,0x92,0x31,0x0c,0x03,0x00,0x40,0x05,0x01,0x00,0x00,0x10,0x30,0x00,0x00,0x60,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x06,0x00,0x00,0x0c,0xc0,0xff,0xff,0x1f,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xf8,0xff,0xff,0x03};
static const unsigned char image_wifi_bits[] U8X8_PROGMEM = {0x80,0x0f,0x00,0x60,0x30,0x00,0x18,0xc0,0x00,0x84,0x0f,0x01,0x62,0x30,0x02,0x11,0x40,0x04,0x08,0x87,0x00,0xc4,0x18,0x01,0x20,0x20,0x00,0x10,0x42,0x00,0x80,0x0d,0x00,0x40,0x10,0x00,0x00,0x02,0x00,0x00,0x05,0x00,0x00,0x02,0x00,0x00,0x00,0x00};

void oledBegin(){
  u8g2.begin();
}

void displaySend() {
    u8g2.clearBuffer();
    u8g2.setFontMode(1);
    u8g2.setBitmapMode(1);
    u8g2.drawXBMP(0, 0, 128, 63, image_Layer_19_bits);

    u8g2.drawXBMP(1, 3, 24, 16, image_battery_empty_bits);

    u8g2.drawXBMP(1, 3, 24, 16, image_battery_charging_bits);

    u8g2.drawXBMP(31, 4, 19, 16, image_wifi_bits);

    u8g2.drawLine(32, 3, 47, 18);

    u8g2.drawXBMP(56, 2, 11, 16, image_hour_glass_75_bits);

    u8g2.drawXBMP(74, 7, 13, 16, image_lamp_on_bits);

    u8g2.drawXBMP(94, 7, 13, 16, image_lamp_on_bits);

    u8g2.drawXBMP(114, 7, 13, 16, image_lamp_on_bits);

    u8g2.setFont(u8g2_font_4x6_tr);
    u8g2.drawStr(21, 42, String(rx.panDegreeRead).c_str());

    u8g2.drawStr(21, 50, String(rx.tiltDegreeRead).c_str());

    u8g2.drawStr(21, 58, "MAN");

    u8g2.setFont(u8g2_font_t0_11b_tr);
    u8g2.drawStr(67, 43, String(rx.panelVoltage, 1).c_str());

    u8g2.drawStr(67, 52, String(rx.panelCurrent, 0).c_str());

    u8g2.drawStr(67, 61, "12");

    u8g2.drawStr(99, 49,String(rx.batteryVoltage, 1).c_str());

    u8g2.setFont(u8g2_font_4x6_tr);
    u8g2.drawStr(115, 57, "CHG");

    u8g2.sendBuffer();
}
